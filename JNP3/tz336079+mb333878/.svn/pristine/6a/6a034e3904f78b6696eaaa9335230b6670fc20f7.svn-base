#ifndef SEJF_H
#define SEJF_H

#include <string>
#include "kontroler.h"

class Kontroler;

class Sejf final
{
public:
	friend class Kontroler;

	Sejf(const char* text, int numOfAttempts = 42)
		: _text(text)
		, _numOfAttempts(numOfAttempts)
		, _kontroler(&_status, &_numOfAttempts)
		{
			if (_numOfAttempts < 0)
				_numOfAttempts = 0;
		}
	Sejf(Sejf&& other);

public:
	short int operator[](const int idx);
	Sejf& operator+=(const int val);
	Sejf& operator-=(const int val);
	Sejf& operator*=(const int val);
	Sejf& operator=(Sejf&& other);
	const Kontroler& kontroler() const;

private:
	std::string _text;
	int _numOfAttempts;
	Status _status;
	const Kontroler _kontroler;

	void move(Sejf&& other);
	void setAlert();
	void setModified();
};

#endif // SEJF_H
